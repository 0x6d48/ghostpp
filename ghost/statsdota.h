/*

   Copyright [2008] [Trevor Hogan]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

   CODE PORTED FROM THE ORIGINAL GHOST PROJECT: http://ghost.pwner.org/

*/

#ifndef STATSDOTA_H
#define STATSDOTA_H

/*

++ New real-time replay data:
- When a hero dies: Hero<d>,<k> where d=dead player id and k=kill player id
- When a chicken dies: Courier<d>,<k> where d=dead player id and k=kill player id
- When tower dies: Tower<a><l><s>,<k> where a=alliance (0,1 0=sent, 1=scourge) l=level (1,2,3,4) s=side (0=top,1=mid,2=bot) and k=kill player id. for level 4 towers, s=1
- When rax dies: rax<a><s><t>,<k> where a=alliance (0,1 0=sent, 1=scourge) s=side (0=top,1=mid,2=bot) t=rax type (0,1 0=melee, 1=range) k=kill player id
- When Throne gets hurt: Frozen Throne,<p> where p=current percentage hp (75/50/25/10)
- When Tree gets hurt: World Tree,<p> where p=current percentage hp (75/50/25/10)
- When a player gets disconnected: CK<k>D<d>N<n>,<p> where k=creep kills, d=creep denies, n=neutral kills, p=player id of leaver

*/

//////////////
// examples //
//////////////

/* when a hero dies

	f7 26 1d 00 ed c4 e0 fd  6b 64 72 2e 78 00 44 61 .&...... kdr.x.Da
	74 61 00 48 65 72 6f 34  00 06 00 00 00          ta.Hero4 .....
*/

/* when a chicken dies

*/

/* when a tower dies

	f7 26 20 00 e9 51 21 39  6b 64 72 2e 78 00 44 61 .& ..Q!9 kdr.x.Da
	74 61 00 54 6f 77 65 72  30 33 31 00 0b 00 00 00 ta.Tower 031.....
*/

/* when a rax dies

	f7 26 1e 00 8f 4f c0 0a  6b 64 72 2e 78 00 44 61 .&...O.. kdr.x.Da
	74 61 00 52 61 78 30 30  30 00 06 00 00 00       ta.Rax00 0.....
*/

/* when throne gets hurt

*/

/* when tree gets hurt

	f7 26 1c 00 85 52 06 ae  6b 64 72 2e 78 00 44 61 .&...R.. kdr.x.Da
	74 61 00 54 72 65 65 00  4b 00 00 00             ta.Tree. K...
*/

/* when a player disconnects

	f7 26 1f 00 11 67 9b 2f  6b 64 72 2e 78 00 44 61 .&...g./ kdr.x.Da
	74 61 00 43 4b 33 44 30  4e 30 00 04 00 00 00    ta.CK3D0 N0.....
*/

/* end game data

000427BA  f7 26 fe 03 85 53 3f e1  16 02 01 00 03 59 00 00 .&...S?. .....Y..
000427CA  67 6c 00 00 16 02 08 00  65 6a 00 00 79 71 00 00 gl...... ej..yq..
000427DA  2a 6a 00 00 d6 70 00 00  45 64 00 00 c0 6d 00 00 *j...p.. Ed...m..
000427EA  2e 5b 00 00 2e 5b 00 00  4b 5b 00 00 4b 5b 00 00 .[...[.. K[..K[..
000427FA  da 5a 00 00 da 5a 00 00  bb 5b 00 00 bb 5b 00 00 .Z...Z.. .[...[..
0004280A  13 5b 00 00 13 5b 00 00  6b 64 72 2e 78 00 31 00 .[...[.. kdr.x.1.
0004281A  31 00 0b 00 00 00 6b 64  72 2e 78 00 31 00 32 00 1.....kd r.x.1.2.
0004282A  05 00 00 00 6b 64 72 2e  78 00 31 00 33 00 44 00 ....kdr. x.1.3.D.
0004283A  00 00 6b 64 72 2e 78 00  31 00 34 00 01 00 00 00 ..kdr.x. 1.4.....
0004284A  6b 64 72 2e 78 00 31 00  35 00 08 00 00 00 6b 64 kdr.x.1. 5.....kd
0004285A  72 2e 78 00 31 00 36 00  1a 0d 00 00 6b 64 72 2e r.x.1.6. ....kdr.
0004286A  78 00 31 00 37 00 07 00  00 00 6b 64 72 2e 78 00 x.1.7... ..kdr.x.
0004287A  31 00 38 5f 30 00 4c 41  30 49 6b 64 72 2e 78 00 1.8_0.LA 0Ikdr.x.
0004288A  31 00 38 5f 31 00 46 36  30 49 6b 64 72 2e 78 00 1.8_1.F6 0Ikdr.x.
0004289A  31 00 38 5f 32 00 32 36  30 49 6b 64 72 2e 78 00 1.8_2.26 0Ikdr.x.
000428AA  31 00 38 5f 33 00 00 00  00 00 6b 64 72 2e 78 00 1.8_3... ..kdr.x.
000428BA  31 00 38 5f 34 00 00 00  00 00 6b 64 72 2e 78 00 1.8_4... ..kdr.x.
000428CA  31 00 38 5f 35 00 4f 32  30 49 6b 64 72 2e 78 00 1.8_5.O2 0Ikdr.x.
000428DA  31 00 69 64 00 01 00 00  00 6b 64 72 2e 78 00 37 1.id.... .kdr.x.7
000428EA  00 31 00 03 00 00 00 6b  64 72 2e 78 00 37 00 32 .1.....k dr.x.7.2
000428FA  00 09 00 00 00 6b 64 72  2e 78 00 37 00 33 00 20 .....kdr .x.7.3. 
0004290A  00 00 00 6b 64 72 2e 78  00 37 00 34 00 00 00 00 ...kdr.x .7.4....
0004291A  00 6b 64 72 2e 78 00 37  00 35 00 02 00 00 00 6b .kdr.x.7 .5.....k
0004292A  64 72 2e 78 00 37 00 36  00 0c 0b 00 00 6b 64 72 dr.x.7.6 .....kdr
0004293A  2e 78 00 37 00 37 00 03  00 00 00 6b 64 72 2e 78 .x.7.7.. ...kdr.x
0004294A  00 37 00 38 5f 30 00 59  35 30 49 6b 64 72 2e 78 .7.8_0.Y 50Ikdr.x
0004295A  00 37 00 38 5f 31 00 4b  42 30 49 6b 64 72 2e 78 .7.8_1.K B0Ikdr.x
0004296A  00 37 00 38 5f 32 00 00  00 00 00 6b 64 72 2e 78 .7.8_2.. ...kdr.x
0004297A  00 37 00 38 5f 33 00 00  00 00 00 6b 64 72 2e 78 .7.8_3.. ...kdr.x
0004298A  00 37 00 38 5f 34 00 00  00 00 00 6b 64 72 2e 78 .7.8_4.. ...kdr.x
0004299A  00 37 00 38 5f 35 00 00  00 00 00 6b 64 72 2e 78 .7.8_5.. ...kdr.x
000429AA  00 37 00 69 64 00 06 00  00 00 6b 64 72 2e 78 00 .7.id... ..kdr.x.
000429BA  32 00 31 00 01 00 00 00  6b 64 72 2e 78 00 32 00 2.1..... kdr.x.2.
000429CA  32 00 03 00 00 00 6b 64  72 2e 78 00 32 00 33 00 2.....kd r.x.2.3.
000429DA  0d 00 00 00 6b 64 72 2e  78 00 32 00 34 00 01 00 ....kdr. x.2.4...
000429EA  00 00 6b 64 72 2e 78 00  32 00 35 00 0c 00 00 00 ..kdr.x. 2.5.....
000429FA  6b 64 72 2e 78 00 32 00  36 00 34 07 00 00 6b 64 kdr.x.2. 6.4...kd
00042A0A  72 2e 78 00 32 00 37 00  00 00 00 00 6b 64 72 2e r.x.2.7. ....kdr.
00042A1A  78 00 32 00 38 5f 30 00  33 39 30 49 6b 64 72 2e x.2.8_0. 390Ikdr.
00042A2A  78 00 32 00 38 5f 31 00  4f 32 30 49 6b 64 72 2e x.2.8_1. O20Ikdr.
00042A3A  78 00 32 00 38 5f 32 00  42 34 30 49 6b 64 72 2e x.2.8_2. B40Ikdr.
00042A4A  78 00 32 00 38 5f 33 00  52 34 30 49 6b 64 72 2e x.2.8_3. R40Ikdr.
00042A5A  78 00 32 00 38 5f 34 00  00 00 00 00 6b 64 72 2e x.2.8_4. ....kdr.
00042A6A  78 00 32 00 38 5f 35 00  00 00 00 00 6b 64 72 2e x.2.8_5. ....kdr.
00042A7A  78 00 32 00 69 64 00 02  00 00 00 6b 64 72 2e 78 x.2.id.. ...kdr.x
00042A8A  00 38 00 31 00 06 00 00  00 6b 64 72 2e 78 00 38 .8.1.... .kdr.x.8
00042A9A  00 32 00 05 00 00 00 6b  64 72 2e 78 00 38 00 33 .2.....k dr.x.8.3
00042AAA  00 42 00 00 00 6b 64 72  2e 78 00 38 00 34 00 00 .B...kdr .x.8.4..
00042ABA  00 00 00 6b 64 72 2e 78  00 38 00 35 00 07 00 00 ...kdr.x .8.5....
00042ACA  00 6b 64 72 2e 78 00 38  00 36 00 12 00 00 00 6b .kdr.x.8 .6.....k
00042ADA  64 72 2e 78 00 38 00 37  00 05 00 00 00 6b 64 72 dr.x.8.7 .....kdr
00042AEA  2e 78 00 38 00 38 5f 30  00 44 42 30 49 6b 64 72 .x.8.8_0 .DB0Ikdr
00042AFA  2e 78 00 38 00 38 5f 31  00 59 35 30 49 6b 64 72 .x.8.8_1 .Y50Ikdr
00042B0A  2e 78 00 38 00 38 5f 32  00 35 39 30 49 6b 64 72 .x.8.8_2 .590Ikdr
00042B1A  2e 78 00 38 00 38 5f 33  00 00 00 00 00 6b 64 72 .x.8.8_3 .....kdr
00042B2A  2e 78 00 38 00 38 5f 34  00 00 00 00 00 6b 64 72 .x.8.8_4 .....kdr
00042B3A  2e 78 00 38 00 38 5f 35  00 00 00 00 00 6b 64 72 .x.8.8_5 .....kdr
00042B4A  2e 78 00 38 00 69 64 00  07 00 00 00 6b 64 72 2e .x.8.id. ....kdr.
00042B5A  78 00 33 00 31 00 05 00  00 00 6b 64 72 2e 78 00 x.3.1... ..kdr.x.
00042B6A  33 00 32 00 05 00 00 00  6b 64 72 2e 78 00 33 00 3.2..... kdr.x.3.
00042B7A  33 00 4a 00 00 00 6b 64  72 2e 78 00 33 00 34 00 3.J...kd r.x.3.4.
00042B8A  00 00 00 00 6b 64 72 2e  78 00 33 00 35 00 0c 00 ....kdr. x.3.5...
00042B9A  00 00 6b 64 72 2e 78 00  33 00 36 00 5c 0a 00 00 ..kdr.x. 3.6.\...
00042BAA  6b 64 72 2e 78 00 33 00  37 00 00 00 00 00       kdr.x.3. 7.....

00042BB8  f7 26 05 04 f0 ec b4 12  6b 64 72 2e 78 00 33 00 .&...... kdr.x.3.
00042BC8  38 5f 30 00 4f 32 30 49  6b 64 72 2e 78 00 33 00 8_0.O20I kdr.x.3.
00042BD8  38 5f 31 00 38 41 30 49  6b 64 72 2e 78 00 33 00 8_1.8A0I kdr.x.3.
00042BE8  38 5f 32 00 51 34 30 49  6b 64 72 2e 78 00 33 00 8_2.Q40I kdr.x.3.
00042BF8  38 5f 33 00 37 34 30 49  6b 64 72 2e 78 00 33 00 8_3.740I kdr.x.3.
00042C08  38 5f 34 00 00 00 00 00  6b 64 72 2e 78 00 33 00 8_4..... kdr.x.3.
00042C18  38 5f 35 00 00 00 00 00  6b 64 72 2e 78 00 33 00 8_5..... kdr.x.3.
00042C28  69 64 00 03 00 00 00 6b  64 72 2e 78 00 39 00 31 id.....k dr.x.9.1
00042C38  00 08 00 00 00 6b 64 72  2e 78 00 39 00 32 00 04 .....kdr .x.9.2..
00042C48  00 00 00 6b 64 72 2e 78  00 39 00 33 00 3c 00 00 ...kdr.x .9.3.<..
00042C58  00 6b 64 72 2e 78 00 39  00 34 00 03 00 00 00 6b .kdr.x.9 .4.....k
00042C68  64 72 2e 78 00 39 00 35  00 07 00 00 00 6b 64 72 dr.x.9.5 .....kdr
00042C78  2e 78 00 39 00 36 00 0a  00 00 00 6b 64 72 2e 78 .x.9.6.. ...kdr.x
00042C88  00 39 00 37 00 00 00 00  00 6b 64 72 2e 78 00 39 .9.7.... .kdr.x.9
00042C98  00 38 5f 30 00 59 35 30  49 6b 64 72 2e 78 00 39 .8_0.Y50 Ikdr.x.9
00042CA8  00 38 5f 31 00 48 36 30  49 6b 64 72 2e 78 00 39 .8_1.H60 Ikdr.x.9
00042CB8  00 38 5f 32 00 47 42 30  49 6b 64 72 2e 78 00 39 .8_2.GB0 Ikdr.x.9
00042CC8  00 38 5f 33 00 35 39 30  49 6b 64 72 2e 78 00 39 .8_3.590 Ikdr.x.9
00042CD8  00 38 5f 34 00 00 00 00  00 6b 64 72 2e 78 00 39 .8_4.... .kdr.x.9
00042CE8  00 38 5f 35 00 00 00 00  00 6b 64 72 2e 78 00 39 .8_5.... .kdr.x.9
00042CF8  00 69 64 00 08 00 00 00  6b 64 72 2e 78 00 34 00 .id..... kdr.x.4.
00042D08  31 00 04 00 00 00 6b 64  72 2e 78 00 34 00 32 00 1.....kd r.x.4.2.
00042D18  05 00 00 00 6b 64 72 2e  78 00 34 00 33 00 67 00 ....kdr. x.4.3.g.
00042D28  00 00 6b 64 72 2e 78 00  34 00 34 00 02 00 00 00 ..kdr.x. 4.4.....
00042D38  6b 64 72 2e 78 00 34 00  35 00 0b 00 00 00 6b 64 kdr.x.4. 5.....kd
00042D48  72 2e 78 00 34 00 36 00  b8 0f 00 00 6b 64 72 2e r.x.4.6. ....kdr.
00042D58  78 00 34 00 37 00 0a 00  00 00 6b 64 72 2e 78 00 x.4.7... ..kdr.x.
00042D68  34 00 38 5f 30 00 4c 36  30 49 6b 64 72 2e 78 00 4.8_0.L6 0Ikdr.x.
00042D78  34 00 38 5f 31 00 4c 36  30 49 6b 64 72 2e 78 00 4.8_1.L6 0Ikdr.x.
00042D88  34 00 38 5f 32 00 4f 32  30 49 6b 64 72 2e 78 00 4.8_2.O2 0Ikdr.x.
00042D98  34 00 38 5f 33 00 50 39  30 49 6b 64 72 2e 78 00 4.8_3.P9 0Ikdr.x.
00042DA8  34 00 38 5f 34 00 32 35  30 49 6b 64 72 2e 78 00 4.8_4.25 0Ikdr.x.
00042DB8  34 00 38 5f 35 00 00 00  00 00 6b 64 72 2e 78 00 4.8_5... ..kdr.x.
00042DC8  34 00 69 64 00 04 00 00  00 6b 64 72 2e 78 00 31 4.id.... .kdr.x.1
00042DD8  30 00 31 00 00 00 00 00  6b 64 72 2e 78 00 31 30 0.1..... kdr.x.10
00042DE8  00 32 00 00 00 00 00 6b  64 72 2e 78 00 31 30 00 .2.....k dr.x.10.
00042DF8  33 00 00 00 00 00 6b 64  72 2e 78 00 31 30 00 34 3.....kd r.x.10.4
00042E08  00 00 00 00 00 6b 64 72  2e 78 00 31 30 00 35 00 .....kdr .x.10.5.
00042E18  00 00 00 00 6b 64 72 2e  78 00 31 30 00 36 00 0a ....kdr. x.10.6..
00042E28  00 00 00 6b 64 72 2e 78  00 31 30 00 37 00 00 00 ...kdr.x .10.7...
00042E38  00 00 6b 64 72 2e 78 00  31 30 00 38 5f 30 00 00 ..kdr.x. 10.8_0..
00042E48  00 00 00 6b 64 72 2e 78  00 31 30 00 38 5f 31 00 ...kdr.x .10.8_1.
00042E58  00 00 00 00 6b 64 72 2e  78 00 31 30 00 38 5f 32 ....kdr. x.10.8_2
00042E68  00 00 00 00 00 6b 64 72  2e 78 00 31 30 00 38 5f .....kdr .x.10.8_
00042E78  33 00 00 00 00 00 6b 64  72 2e 78 00 31 30 00 38 3.....kd r.x.10.8
00042E88  5f 34 00 00 00 00 00 6b  64 72 2e 78 00 31 30 00 _4.....k dr.x.10.
00042E98  38 5f 35 00 00 00 00 00  6b 64 72 2e 78 00 31 30 8_5..... kdr.x.10
00042EA8  00 69 64 00 09 00 00 00  6b 64 72 2e 78 00 35 00 .id..... kdr.x.5.
00042EB8  31 00 02 00 00 00 6b 64  72 2e 78 00 35 00 32 00 1.....kd r.x.5.2.
00042EC8  03 00 00 00 6b 64 72 2e  78 00 35 00 33 00 21 00 ....kdr. x.5.3.!.
00042ED8  00 00 6b 64 72 2e 78 00  35 00 34 00 01 00 00 00 ..kdr.x. 5.4.....
00042EE8  6b 64 72 2e 78 00 35 00  35 00 09 00 00 00 6b 64 kdr.x.5. 5.....kd
00042EF8  72 2e 78 00 35 00 36 00  26 09 00 00 6b 64 72 2e r.x.5.6. &...kdr.
00042F08  78 00 35 00 37 00 15 00  00 00 6b 64 72 2e 78 00 x.5.7... ..kdr.x.
00042F18  35 00 38 5f 30 00 4d 42  30 49 6b 64 72 2e 78 00 5.8_0.MB 0Ikdr.x.
00042F28  35 00 38 5f 31 00 41 42  30 49 6b 64 72 2e 78 00 5.8_1.AB 0Ikdr.x.
00042F38  35 00 38 5f 32 00 59 35  30 49 6b 64 72 2e 78 00 5.8_2.Y5 0Ikdr.x.
00042F48  35 00 38 5f 33 00 31 35  30 49 6b 64 72 2e 78 00 5.8_3.15 0Ikdr.x.
00042F58  35 00 38 5f 34 00 00 00  00 00 6b 64 72 2e 78 00 5.8_4... ..kdr.x.
00042F68  35 00 38 5f 35 00 00 00  00 00 6b 64 72 2e 78 00 5.8_5... ..kdr.x.
00042F78  35 00 69 64 00 05 00 00  00 6b 64 72 2e 78 00 31 5.id.... .kdr.x.1
00042F88  31 00 31 00 03 00 00 00  6b 64 72 2e 78 00 31 31 1.1..... kdr.x.11
00042F98  00 32 00 06 00 00 00 6b  64 72 2e 78 00 31 31 00 .2.....k dr.x.11.
00042FA8  33 00 3e 00 00 00 6b 64  72 2e 78 00 31 31 00 34 3.>...kd r.x.11.4
00042FB8  00 01 00 00 00 f7 26 c3  00 42 f4 0e 46 6b 64 72 ......&. .B..Fkdr
00042FC8  2e 78 00 31 31 00 35 00  0a 00 00 00 6b 64 72 2e .x.11.5. ....kdr.
00042FD8  78 00 31 31 00 36 00 06  00 00 00 6b 64 72 2e 78 x.11.6.. ...kdr.x
00042FE8  00 31 31 00 37 00 00 00  00 00 6b 64 72 2e 78 00 .11.7... ..kdr.x.
00042FF8  31 31 00 38 5f 30 00 54  32 30 49 6b 64 72 2e 78 11.8_0.T 20Ikdr.x
00043008  00 31 31 00 38 5f 31 00  35 39 30 49 6b 64 72 2e .11.8_1. 590Ikdr.
00043018  78 00 31 31 00 38 5f 32  00 00 00 00 00 6b 64 72 x.11.8_2 .....kdr
00043028  2e 78 00 31 31 00 38 5f  33 00 56 34 30 49 6b 64 .x.11.8_ 3.V40Ikd
00043038  72 2e 78 00 31 31 00 38  5f 34 00 37 36 30 49 6b r.x.11.8 _4.760Ik
00043048  64 72 2e 78 00 31 31 00  38 5f 35 00 00 00 00 00 dr.x.11. 8_5.....
00043058  6b 64 72 2e 78 00 31 31  00 69 64 00 0a 00 00 00 kdr.x.11 .id.....
00043068  6b 64 72 2e 78 00 47 6c  6f 62 61 6c 00 57 69 6e kdr.x.Gl obal.Win
00043078  6e 65 72 00 01 00 00 00  f7 27 09 00 00 1e 6f 5c ner..... .'....o\
00043088  5a f7 21 08 00 09 00 00  00                      Z.!..... .

*/

//
// CStatsDOTA
//

class CDBDotAPlayer;

class CStatsDOTA : public CStats
{
private:
	CDBDotAPlayer *m_Players[12];
	uint32_t m_Winner;
	uint32_t m_Min;
	uint32_t m_Sec;

public:
	CStatsDOTA( CBaseGame *nGame );
	virtual ~CStatsDOTA( );

	virtual bool ProcessAction( CIncomingAction *Action );
	virtual void Save( CGHostDB *DB, uint32_t GameID );
};

#endif
